# 系统架构

## 架构总览

Paper Factory 是一个基于 **Skill + Agent 混合架构** 的多智能体学术论文生成系统。系统采用分层编排设计，通过 Skill 层（同步执行）和 Agent 层（独立执行）的协作完成从文献调研到论文撰写的全流程。

```
╔══════════════════════════════════════════════════════════════╗
║               Paper Factory — Skill + Agent 混合架构        ║
╠══════════════════════════════════════════════════════════════╣
║                                                             ║
║  ┌────────────────────────────────────────────────────────┐  ║
║  │  User Request                                          │  ║
║  │      ↓                                                 │  ║
║  │ ┌────────────────────────────────────────────────────┐ │  ║
║  │ │         系统 (主编排器)                             │ │  ║
║  │ │                                                    │ │  ║
║  │ │  ════════════════════════════════════════════════   │ │  ║
║  │ │  │  Skill 层 (同步调用，共享上下文)                │ │  ║
║  │ │  │       ↓ 管理完整 4-Phase 流程                   │ │  ║
║  │ │  │  ├─→ paper-generation (主编排器)                │ │  ║
║  │ │  │       ↓                                         │ │  ║
║  │ │  │  ├─→ Phase Skills (4 阶段编排)                  │ │  ║
║  │ │  │       ↓                                         │ │  ║
║  │ │  │  ├─→ Agent Skills (10 个专业 Agent)             │ │  ║
║  │ │  │       ↓                                         │ │  ║
║  │ │  │  └─→ 辅助 Skills (缓存/版本/模板)              │ │  ║
║  │ │  ════════════════════════════════════════════════   │ │  ║
║  │ └────────────────────────────────────────────────────┘ │  ║
║  └────────────────────────────────────────────────────────┘  ║
║                                                             ║
║  ↓ (文件系统作为 Agent 间的通信媒介)                        ║
║                                                             ║
║  ↓ (Skill 同步调用 + 领域分析)                              ║
║                                                             ║
║  Phase 1: Research                                          ║
║  ├─ A1 (文献调研) → a1-literature-survey.json/md            ║
║  ├─ B1 (相关工作) → b1-related-work.json/md                ║
║  └─ 创新聚合（内联）→ innovation-synthesis.json/md          ║
║                                                             ║
║  Phase 2: Design                                            ║
║  ├─ B2 (实验设计) → b2-experiment-design.json/md            ║
║  └─ B3 (架构设计) → b3-paper-outline.json/md               ║
║                                                             ║
║  Phase 3: Writing                                           ║
║  ├─ C1 (章节撰写) → sections/*.md [多次调用]               ║
║  ├─ C2 (图表设计) → figures/all-figures.md, tables.md       ║
║  ├─ C3 (格式整合) → output/paper.md                        ║
║  └─ C4 (LaTeX编译) → output/paper.tex + paper.pdf          ║
// __CONTINUE_HERE__